stages:
  - testing
  - build

run_tests:
  image: denoland/deno:latest
  stage: testing
  script:
    - deno test

build_docker_image:
  stage: build
  needs:
    - run_tests
  image: docker:latest
  services:
    - docker:dind
  script:
    - docker info
    - docker build -t shopping-cat .